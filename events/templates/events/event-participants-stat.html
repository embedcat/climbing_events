{% extends 'events/event-base.html' %}
{% block title %}
Участники
{% endblock %}

{% block content %}
{% if event.is_published %}
{% load events_tags %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
<script src="/static/events/js/stat-charts.js" type="text/javascript"></script>

<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link" href="{% url 'event_participants' event.id %}">Список</a>
  </li>
  <li class="nav-item">
    <a class="nav-link active" aria-current="page" href="{% url 'event_participants_stat' event.id %}">Статистика</a>
  </li>
</ul>
<div class="d-flex justify-content-center my-2">Распределение по сетам</div>
<div class="card-body"><canvas id="setChart" width="100%"></canvas></div>
<hr>
<div class="d-flex justify-content-center my-2">Распределение по группам</div>
<div class="card-body"><canvas id="groupChart" width="100%"></canvas></div>
<hr>
<div class="d-flex justify-content-center my-2">Распределение по городам</div>
<div class="card-body"><canvas id="cityChart" width="100%"></canvas></div>

<script>
var set_data = JSON.parse("{{ chart_set_data|escapejs }}");
drawBarChart("setChart", set_data);
var group_data = JSON.parse("{{ chart_group_data|escapejs }}");
drawDoughnutChart("groupChart", group_data);
var city_data = JSON.parse("{{ chart_city_data|escapejs }}");
drawDoughnutChart("cityChart", city_data);
</script>

{% else %}
{% include 'events/snippet-card-banner.html' with message='Событие не опубликовано' %}
{% endif %}

{% endblock %}
